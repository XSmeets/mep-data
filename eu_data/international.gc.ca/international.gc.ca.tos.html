<html class="js backgroundsize borderimage csstransitions fontface svg details progressbar meter mathml cors xlargeview" dir="ltr" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns#" class="at-element-marker">
    
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Terms and conditions - Canada.ca</title>
<meta content="width=device-width,initial-scale=1" name="viewport">


	<link rel="schema.dcterms" href="http://purl.org/dc/terms/">
	<link rel="canonical" href="https://www.canada.ca/en/transparency/terms.html">
    <link rel="alternate" hreflang="en" href="https://www.canada.ca/en/transparency/terms.html">
	
        <link rel="alternate" hreflang="fr" href="https://www.canada.ca/fr/transparence/avis.html">
	
	
		<meta name="description" content="Access information on Government of Canada copyrights and permissions to reproduce.">
	
	
	
		<meta name="author" content="Service Canada">
	
	
		<meta name="dcterms.title" content="Terms and conditions">
	
	
		<meta name="dcterms.description" content="Access information on Government of Canada copyrights and permissions to reproduce.">
	
	
		<meta name="dcterms.creator" content="Service Canada">
	
	
	
		<meta name="dcterms.language" title="ISO639-2/T" content="eng">
	
	
		<meta name="dcterms.subject" title="gccore" content="Terms and conditions">
	
	
		<meta name="dcterms.issued" title="W3CDTF" content="2015-05-26">
	
	
		<meta name="dcterms.modified" title="W3CDTF" content="2022-07-28">
	
	
		<meta name="dcterms.audience" content="general public">
	
	
		<meta name="dcterms.spatial" content="Canada">
	
	
	
	
	
	
		<meta name="dcterms.identifier" content="Service_Canada">
	
	
	
    



	<meta prefix="fb: https://www.facebook.com/2008/fbml" property="fb:pages" content="378967748836213, 160339344047502, 184605778338568, 237796269600506, 10860597051, 14498271095, 209857686718, 160504807323251, 111156792247197, 113429762015861, 502566449790031, 312292485564363, 1471831713076413, 22724568071, 17294463927, 1442463402719857, 247990812241506, 730097607131117, 1142481292546228, 1765602380419601, 131514060764735, 307780276294187, 427238637642566, 525934210910141, 1016214671785090, 192657607776229, 586856208161152, 1146080748799944, 408143085978521, 490290084411688, 163828286987751, 565688503775086, 460123390028, 318424514044, 632493333805962, 370233926766473, 173004244677, 1562729973959056, 362400293941960, 769857139754987, 167891083224996, 466882737009651, 126404198009505, 135409166525475, 664638680273646, 169011506491295, 217171551640146, 182842831756930, 1464645710444681, 218822426028, 218740415905, 123326971154939, 125058490980757, 1062292210514762, 1768389106741505, 310939332270090, 285960408117397, 985916134909087, 655533774808209, 1522633664630497, 686814348097821, 230798677012118, 320520588000085, 103201203106202, 273375356172196, 61263506236, 353102841161, 1061339807224729, 1090791104267764, 395867780593657, 1597876400459657, 388427768185631, 937815283021844, 207409132619743, 1952090675003143, 206529629372368, 218566908564369, 175257766291975, 118472908172897, 767088219985590, 478573952173735, 465264530180856, 317418191615817, 428040827230778, 222493134493922, 196833853688656, 194633827256676, 252002641498535, 398018420213195, 265626156847421, 202442683196210, 384350631577399, 385499078129720, 178433945604162, 398240836869162, 326182960762584, 354672164565195, 375081249171867, 333050716732105, 118996871563050, 240349086055056, 119579301504003, 185184131584797, 333647780005544, 306255172770146, 369589566399283, 117461228379000, 349774478396157, 201995959908210, 307017162692056, 145928592172074, 122656527842056">


	


    


	<iframe src="javascript:void(0)" title="" role="presentation" style="width: 0px; height: 0px; border: 0px; display: none;"></iframe><script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/i18n/en.min.js"></script><script type="text/javascript" src="https://www.canada.ca/public/55e73bc68ac4090d977d640250e4ec12b40012b839fb"></script><script src="//assets.adobedtm.com/be5dfd287373/abb618326704/launch-3eac5e076135.min.js"></script><script src="https://assets.adobedtm.com/extensions/EPef068a8d6dd34a43866d9a80cc98baab/AppMeasurement.min.js" async=""></script><script src="https://assets.adobedtm.com/extensions/EPef068a8d6dd34a43866d9a80cc98baab/AppMeasurement_Module_ActivityMap.min.js" async=""></script>










<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
<link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/theme.min.css">
<link href="/etc/designs/canada/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon">
<noscript><link rel="stylesheet" href="/etc/designs/canada/wet-boew/css/noscript.min.css"/></noscript>





                              <script>!function(a){var e="https://s.go-mpulse.net/boomerang/",t="addEventListener";if("False"=="True")a.BOOMR_config=a.BOOMR_config||{},a.BOOMR_config.PageParams=a.BOOMR_config.PageParams||{},a.BOOMR_config.PageParams.pci=!0,e="https://s2.go-mpulse.net/boomerang/";if(window.BOOMR_API_key="KBFUZ-C9D7G-RB8SX-GRGEN-HGMC9",function(){function n(e){a.BOOMR_onload=e&&e.timeStamp||(new Date).getTime()}if(!a.BOOMR||!a.BOOMR.version&&!a.BOOMR.snippetExecuted){a.BOOMR=a.BOOMR||{},a.BOOMR.snippetExecuted=!0;var i,_,o,r=document.createElement("iframe");if(a[t])a[t]("load",n,!1);else if(a.attachEvent)a.attachEvent("onload",n);r.src="javascript:void(0)",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="width:0;height:0;border:0;display:none;",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(r,o);try{_=r.contentWindow.document}catch(O){i=document.domain,r.src="javascript:var d=document.open();d.domain='"+i+"';void(0);",_=r.contentWindow.document}_.open()._l=function(){var a=this.createElement("script");if(i)this.domain=i;a.id="boomr-if-as",a.src=e+"KBFUZ-C9D7G-RB8SX-GRGEN-HGMC9",BOOMR_lstart=(new Date).getTime(),this.body.appendChild(a)},_.write("<bo"+'dy onload="document._l();">'),_.close()}}(),"".length>0)if(a&&"performance"in a&&a.performance&&"function"==typeof a.performance.setResourceTimingBufferSize)a.performance.setResourceTimingBufferSize();!function(){if(BOOMR=a.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.AK){var e=""=="true"?1:0,t="",n="yo22zgax2hw6kzqmmhqa-f-6ab7d09be-clientnsv4-s.akamaihd.net",i="false"=="true"?2:1,_={"ak.v":"37","ak.cp":"368225","ak.ai":parseInt("231651",10),"ak.ol":"0","ak.cr":2,"ak.ipv":4,"ak.proto":"h2","ak.rid":"14ebbc05","ak.r":47808,"ak.a2":e,"ak.m":"dscb","ak.n":"essl","ak.bpcip":"195.181.172.0","ak.cport":55185,"ak.gh":"2.16.142.92","ak.quicv":"","ak.tlsv":"tls1.3","ak.0rtt":"","ak.csrc":"-","ak.acc":"","ak.t":"1712087520","ak.ak":"hOBiQwZUYzCg5VSAfCLimQ==qDdz9MK6uELWFUcE2kZhavl/ShJBLKueiQ23HNxRSkAapOU+uKaXAKROCyplgn/uEA0iHZYUXIv7ntW8+jteIt3uJw8kh43s/senNqBGPu/4EkhD9bK2SX7D9xSyjC43JSAw4FAXZEVxes9aOqXX2BmzOkTZkkGQRD31OHSKFFe60PLM4JmYScfqBCgRScle51NWTIXTeubJMh/nvsJuVVQ++sl1InPKzsCfe1XY8d88FrZFgbjlec6WawHXds/5E7ZuGADvbZQSSH814FrhGExMJBVEDlmbw5FqVvimCG5C5Nah1GWn4kcJXOzVCv0mk7Cl1yG4kvMRu4Ec93v8dg0vDEaGv+l1PAAGP7rcA1UKXivys82gxyCFJmEBOWO/OEypYSUHXI+8rfc6pUrD2iodaR+eY6w40biQxIhELoY=","ak.pv":"729","ak.dpoabenc":"","ak.tf":i};if(""!==t)_["ak.ruds"]=t;var o={i:!1,av:function(e){var t="http.initiator";if(e&&(!e[t]||"spa_hard"===e[t]))_["ak.feo"]=void 0!==a.aFeoApplied?1:0,BOOMR.addVar(_)},rv:function(){var a=["ak.bpcip","ak.cport","ak.cr","ak.csrc","ak.gh","ak.ipv","ak.m","ak.n","ak.ol","ak.proto","ak.quicv","ak.tlsv","ak.0rtt","ak.r","ak.acc","ak.t","ak.tf"];BOOMR.removeVar(a)}};BOOMR.plugins.AK={akVars:_,akDNSPreFetchDomain:n,init:function(){if(!o.i){var a=BOOMR.subscribe;a("before_beacon",o.av,null,null),a("onbeacon",o.rv,null,null),o.i=!0}return this},is_complete:function(){return!0}}}}()}(window);</script></head>

<body vocab="http://schema.org/" typeof="WebPage" resource="#wb-webpage">

    




    
        
        
        <div class="newpar new section">

</div>

    
        
        
        <div class="par iparys_inherited">

    
    
    
    
        
        
        <div class="global-header"><nav><ul id="wb-tphp">
	<li class="wb-slc"><a class="wb-sl" href="#wb-cont">Skip to main content</a></li>
	<li class="wb-slc"><a class="wb-sl" href="#wb-info">Skip to "About government"</a></li>
	
</ul></nav>

<header>
	<div id="wb-bnr" class="container">
		<div class="row">
			
			<section id="wb-lng" class="col-xs-3 col-sm-12 pull-right text-right">
    <h2 class="wb-inv">Language selection</h2>
    <div class="row">
        <div class="col-md-12">
            <ul class="list-inline mrgn-bttm-0">
                <li>
                    <a lang="fr" href="/fr/transparence/avis.html">
                        
                            <span class="hidden-xs" translate="no">Français</span>
                            <abbr title="Français" class="visible-xs h3 mrgn-tp-sm mrgn-bttm-0 text-uppercase" translate="no">fr</abbr>
                        
                        
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</section>
				<div class="brand col-xs-9 col-sm-5 col-md-4" property="publisher" resource="#wb-publisher" typeof="GovernmentOrganization">
					
                    
					
						
						<a href="/en.html" property="url">
							<img src="/etc/designs/canada/wet-boew/assets/sig-blk-en.svg" alt="Government of Canada" property="logo">
							<span class="wb-inv"> /
								
								<span lang="fr">Gouvernement du Canada</span>
							</span>
						</a>
					
					<meta property="name" content="Government of Canada">
					<meta property="areaServed" typeof="Country" content="Canada">
					<link property="logo" href="/etc/designs/canada/wet-boew/assets/wmms-blk.svg">
				</div>
				<section id="wb-srch" class="col-lg-offset-4 col-md-offset-4 col-sm-offset-2 col-xs-12 col-sm-5 col-md-4">
					<h2>Search</h2>
					
<form action="/en/sr/srb.html" method="get" name="cse-search-box" role="search">
	<div class="form-group wb-srch-qry">
		<label for="wb-srch-q" class="wb-inv">Search Canada.ca</label>
		
			<input id="wb-srch-q" list="wb-srch-q-ac" class="wb-srch-q form-control" name="q" type="search" value="" size="34" maxlength="170" placeholder="Search Canada.ca">
		    
		

		<datalist id="wb-srch-q-ac">
		</datalist>
	</div>
	<div class="form-group submit">
	<button type="submit" id="wb-srch-sub" class="btn btn-primary btn-small" name="wb-srch-sub"><span class="glyphicon-search glyphicon"></span><span class="wb-inv">Search</span></button>
	</div>
</form>

				</section>
		</div>
	</div>
	<hr>
	
	<div class="container"><div class="row">
		
        <div class="col-md-8">
        <nav class="gcweb-menu" typeof="SiteNavigationElement">
		<h2 class="wb-inv">Menu</h2>
		<button type="button" aria-haspopup="true" aria-expanded="false"><span class="wb-inv">Main </span>Menu <span class="expicon glyphicon glyphicon-chevron-down"></span></button>
		<ul role="menu" aria-orientation="vertical" data-ajax-replace="/content/dam/canada/sitemenu/sitemenu-v2-en.html">
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/jobs.html">Jobs and the workplace</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/immigration-citizenship.html">Immigration and citizenship</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://travel.gc.ca/">Travel and tourism</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/business.html">Business and industry</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/benefits.html">Benefits</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/health.html">Health</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/taxes.html">Taxes</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/environment.html">Environment and natural resources</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/defence.html">National security and defence</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/culture.html">Culture, history and sport</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/policing.html">Policing, justice and emergencies</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/transport.html">Transport and infrastructure</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.international.gc.ca/world-monde/index.aspx?lang=eng">Canada and the world</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/finance.html">Money and finances</a></li>
	<li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.canada.ca/en/services/science.html">Science and innovation</a></li>
</ul>

		
        </nav>   
        </div>
		
		
		<div class="col-xs-offset-6 col-xs-6 col-md-offset-0 col-md-4">
		<section id="wb-so">
	    <h2 class="wb-inv">Sign in</h2>
        <a class="btn btn-primary" href="/en/government/sign-in-online-account.html"><span class="visible-xs">Sign in</span><span class="hidden-xs">Sign in</span></a>
        </section>
        </div>
		
		
    </div></div>
	
		<nav id="wb-bc" property="breadcrumb"><h2 class="wb-inv">You are here:</h2><div class="container"><ol class="breadcrumb">
<li><a href="/en.html">Canada.ca</a></li>
</ol></div></nav>


	

  
</header>
</div>

    

</div>

    




	



    
    

    
    
        <main property="mainContentOfPage" resource="#wb-main" typeof="WebPageElement" class="container">
            
            <div class="mwstitle section">

    <h1 property="name" class="wb-inv" id="wb-cont" dir="ltr">
Terms and conditions</h1>



</div>
<div class="mwstext section"><div class="row profile"> 
 <div class="col-md-12"> 
  <h1 property="name" id="wb-cont">Terms and conditions</h1> 
 </div> 
</div> 
<section> 
 <h2 id="using-files">Using files located on non-Government of Canada servers</h2> 
 <p>To improve the functionality of Government of Canada websites, certain files (such as open source libraries, images and scripts) may be delivered automatically to your browser via a trusted third-party server or content delivery network. The delivery of these files is intended to provide a seamless user experience by speeding response times and avoiding the need for each visitor to download these files. Where applicable, specific privacy statements covering these files are included in our <a href="/en/transparency/privacy.html">Privacy Notice</a>.</p> 
</section> 
<section> 
 <h2 id="providing-content">Providing content in Canada’s official languages</h2> 
 <p>The <a href="http://laws-lois.justice.gc.ca/eng/acts/O-3.01/" rel="external">Official Languages Act</a>, the <a href="http://laws.justice.gc.ca/eng/regulations/SOR-92-48/index.html" rel="external">Official Languages (Communications with and Services to the Public) Regulations</a> and Treasury Board policy requirements establish when we use both English and French to provide services to or communicate with members of the public. When there is no obligation to provide information in both official languages, content may be available in one official language only. Information provided by organizations not subject to the <a href="http://laws-lois.justice.gc.ca/eng/acts/O-3.01/" rel="external">Official Languages Act</a> is in the language(s) provided. Information provided in a language other than English or French is only for the convenience of our visitors.</p> 
</section> 
<section> 
 <h2 id="linking-to">Linking to non-Government of Canada websites</h2> 
 <p>Links to websites not under the control of the Government of Canada, including those to our social media accounts, are provided solely for the convenience of our website visitors. We are not responsible for the accuracy, currency or reliability of the content of such websites. The Government of Canada does not offer any guarantee in that regard and is not responsible for the information found through these links, and does not endorse the sites and their content.</p> 
 <p>Visitors should also be aware that information offered by non-Government of Canada sites to which this website links is not subject to the <a href="http://laws-lois.justice.gc.ca/eng/acts/P-21/index.html">Privacy Act</a> or the <a href="http://laws-lois.justice.gc.ca/eng/acts/O-3.01/" rel="external">Official Languages Act</a> and may not be accessible to persons with disabilities. The information offered may be available only in the language(s) used by the sites in question. With respect to privacy, visitors should research the privacy policies of these non-government websites before providing personal information.</p> 
</section> 
<section> 
 <h2 id="ownership-and">Ownership and usage of content provided on this site</h2> 
 <p>Materials on this website were produced and/or compiled for the purpose of providing Canadians with access to information about the programs and services offered by the Government of Canada. You may use and reproduce the materials as follows:</p> 
 <section> 
  <h3 id="non-commercial">Non-commercial reproduction</h3> 
  <p>Unless otherwise specified you may reproduce the materials in whole or in part for non-commercial purposes, and in any format, without charge or further permission, provided you do the following:</p> 
  <ul> 
   <li>exercise due diligence in ensuring the accuracy of the materials reproduced</li> 
   <li>indicate both the complete title of the materials reproduced, as well as the author (where available)</li> 
   <li>indicate that the reproduction is a copy of the version available at [<abbr title="uniform resource locator">URL</abbr> where original document is available]</li> 
  </ul> 
 </section> 
 <section> 
  <h3 id="commercial">Commercial reproduction</h3> 
  <p>Unless otherwise specified, you may not reproduce materials on this site, in whole or in part, for the purposes of commercial redistribution without prior written permission from the copyright administrator. To obtain permission to reproduce any content owned by the Government of Canada available on this site for commercial purposes, please contact the institution responsible for that content by referring to the institutions list available on the <a href="/en/contact.html">Government of Canada contacts</a> page.</p> 
  <p>Some of the content on this site may be subject to the copyright of another party. Where information has been produced or copyright is not held by the Government of Canada, the materials are protected under the <a href="http://laws-lois.justice.gc.ca/eng/acts/C-42/index.html" rel="external">Copyright Act</a>, and international agreements. Details concerning copyright ownership are indicated on the relevant page(s).</p> 
 </section> 
 <section> 
  <h3 id="trademark-notice">Trademark notice</h3> 
  <p>The official symbols of the Government of Canada, including the Canada wordmark, the Arms of Canada, and the flag symbol may not be reproduced, whether for commercial or non-commercial purposes, without prior <a href="/en/treasury-board-secretariat/topics/government-communications/federal-identity-requirements/legal-protection-official-symbols-government-canada.html" rel="external">written authorization</a>.</p> 
 </section> 
</section> 
<section> 
 <h2 id="our-commitment">Our commitment to accessibility</h2> 
 <p>The Government of Canada is committed to achieving a high standard of accessibility as defined in the <a href="https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=23601" rel="external">Standard on Web Accessibility</a> and the <a href="https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=27088" rel="external">Standard on Optimizing Websites and Applications for Mobile Devices</a>. In the event of difficulty using our web pages, applications or device-based mobile applications, contact us for assistance or to obtain alternative formats such as regular print, Braille or another appropriate format.</p> 
</section> 
<section> 
 <h2 id="interact-with">Interacting with us on social media</h2> 
 <p>This notice has been written to explain how the Government of Canada interacts with the public on social media platforms.</p> 
 <p>Your engagement with the Government of Canada via social media is in part governed by the Terms of Service/Use of the relevant third-party social media platform providers, as well as the following Terms and Conditions. The Government of Canada has no control over the social media platform providers’ Terms of Service/Use, but you are strongly encouraged to read them in addition to those that follow.</p> 
 <section> 
  <h3 id="content-and">Content and frequency</h3> 
  <p>The Government of Canada uses social media accounts as an alternative method of interacting with Canadians and of sharing the content posted on its website, facilitating access to Government of Canada information and services, and providing stakeholders with an opportunity to interact in an informative and respectful environment.</p> 
  <p>Because social media platforms and their computer servers are managed by a third party, social media accounts are subject to downtime that may be out of the Government of Canada’s control. The government accepts no responsibility for platforms becoming unresponsive or unavailable.</p> 
 </section> 
 <section> 
  <h3 id="links-to">Links to other websites and ads</h3> 
  <p>Social media accounts may post or display links or ads for websites that are not under the control of the government of Canada. These links are provided solely for the convenience of users. The government is not responsible for the information found through these links or ads; neither does it endorse the sites or their content.</p> 
 </section> 
 <section> 
  <h3 id="following-liking">Following, "liking" and subscribing</h3> 
  <p>The Government of Canada’s decision to follow, "like" or subscribe to another social media account does not imply an endorsement of that account, channel, page or site, and neither does sharing (re-tweeting, reposting or linking to) content from another user.</p> 
 </section> 
 <section> 
  <h3 id="comments-and">Comments and interaction</h3> 
  <p>The Government of Canada will read comments and participate in discussions when appropriate. Your comments and contributions must be relevant and respectful.</p> 
  <p>The Government of Canada will not engage in partisan or political issues or respond to questions that violate these Terms and Conditions.</p> 
  <p>The Government of Canada reserves the right to remove comments and contributions, and to block users based on the following criteria:</p> 
  <p>The comments or contributions:</p> 
  <ul> 
   <li>include personal information</li> 
   <li>include protected or classified information of the Government of Canada</li> 
   <li>infringe upon intellectual property or proprietary rights</li> 
   <li>are contrary to the principles of the Canadian Charter of Rights and Freedoms, Constitution Act, 1982</li> 
   <li>are racist, hateful, sexist, homophobic or defamatory, or contain or refer to any obscenity or pornography</li> 
   <li>are threatening, violent, intimidating or harassing</li> 
   <li>are contrary to any federal, provincial or territorial laws of Canada</li> 
   <li>constitute impersonation, advertising or spam</li> 
   <li>encourage or incite any criminal activity</li> 
   <li>are written in a language other than English or French</li> 
   <li>otherwise violate this notice</li> 
  </ul> 
  <p>The Government of Canada reserves the right to report users and/or their comments and contributions to third-party social media service providers to prevent or remove the posting of content that is contrary to these Terms and Conditions, or to the Terms of Service/Use of the third-party social media platform.</p> 
 </section> 
 <section> 
  <h3 id="accessibility-of">Accessibility of social media platforms</h3> 
  <p>Social media platforms are third-party service providers and are not bound by Government of Canada standards for web accessibility.</p> 
 </section> 
 <section> 
  <h3 id="copyright">Copyright</h3> 
  <p>Information posted by the Government of Canada is subject to the <a href="http://laws-lois.justice.gc.ca/eng/acts/C-42/index.html" rel="external">Copyright Act</a>.</p> 
 </section> 
 <section> 
  <h3 id="privacy">Privacy</h3> 
  <p>Social media accounts are not Government of Canada websites and represent only their presence on third-party service providers.</p> 
  <p>The Government of Canada uses various social media platforms to tell you about and get your input on government services, programs and initiatives. At times, the government may need to collect personal information from you.</p> 
  <p>This page tells you:</p> 
  <ul> 
   <li>what we mean by "personal information"</li> 
   <li>what we do with it</li> 
  </ul> 
  <p>It also tells you about:</p> 
  <ul> 
   <li>your rights and responsibilities with respect to your personal information</li> 
   <li>what you can do if you have questions or concerns</li> 
  </ul> 
  <p>Personal information is information about you that is recorded in any form and that can be used to identify you. Personal information includes:</p> 
  <ul> 
   <li>your name</li> 
   <li>contact information</li> 
   <li>Internet Protocol (IP) address</li> 
   <li>social media profile information</li> 
   <li>social media "likes" or retweets</li> 
  </ul> 
  <p>To consult you about topics that might interest you or to enable you to participate in outreach activities, we may need to collect biographical information or your opinions and views about different topics.</p> 
  <p>We might use your personal information to:</p> 
  <ul> 
   <li>respond to your enquiries</li> 
   <li>compile statistics and reports</li> 
   <li>consult you about topics that might interest you</li> 
   <li>enable you to participate in outreach activities</li> 
   <li>allow for the sharing of opinions, knowledge, expertise and best practices</li> 
   <li>evaluate programs</li> 
  </ul> 
  <p>If you make inappropriate comments or contributions, we may remove them. We may also block you or report you to third party social media service providers if your comments or contributions violate the <a href="#interact-with">terms and conditions for interacting on social media</a>. When doing so and to the extent necessary, we may use and disclose your personal information.</p> 
  <p>We can make the content of social media interactions publicly available if we have notified participants in advance. We will get your consent to use your personal information to create mailing lists so that we can contact you about upcoming events or to ask you for your views on particular issues.</p> 
  <p>We will not use any personal information that we collect from you through social media accounts to make decisions in processes that you are directly involved in, for example, an employment insurance application, a grant application or a citizenship application.</p> 
  <p>The following personal information banks describe how we handle personal information that we collect through our social media accounts: <a href="/en/treasury-board-secretariat/services/access-information-privacy/access-information/information-about-programs-information-holdings/standard-personal-information-banks.html#psu914">Public Communications (PSU 914)</a> and <a href="/en/treasury-board-secretariat/services/access-information-privacy/access-information/information-about-programs-information-holdings/standard-personal-information-banks.html#psu938">Outreach Activities (PSU 938)</a>.</p> 
  <h3 id="your-rights">Your rights</h3> 
  <p>When you interact with Government of Canada official social media accounts, your social media profile information may be recorded as per the practices of the social media platform. However, you have the right to refuse to give us any additional personal information when you interact with us on social media. There will be no legal or administrative consequences, but you might not be able to take part in a particular activity.</p> 
  <p>You can ask to access personal information that you have given us or that may have been created when you have interacted with us through our social media accounts. We don’t collect and retain this information with the intention of it being retrievable, so if you ask to access to it, please give the date and time of the interaction and any other details that could help us retrieve it. To access this information, you can fill out a <a href="/en/treasury-board-secretariat/services/access-information-privacy/access-information/request-information.html">personal information request form</a>.</p> 
  <h3 id="your-responsibilities">Your responsibilities</h3> 
  <p>If you choose to interact with us on social media, you should read the <a href="#interact-with">terms and conditions for doing so</a>. You should also read the terms of service and the privacy policies of the social media platform provider and those of any applications you use to access that platform.</p> 
  <h3 id="our-responsibilities">Our responsibilities</h3> 
  <p>Whenever we collect personal information from you on social media and whenever personal information is created as a result of your interactions with us on social media, we have to comply with the <em><a href="https://laws-lois.justice.gc.ca/eng/acts/P-21/index.html">Privacy Act</a></em> and the <em><a href="https://laws-lois.justice.gc.ca/eng/acts/A-1/">Access to Information Act</a></em>.</p> 
  <h3 id="questions-concerns">Questions and concerns</h3> 
  <p>If you have questions, comments, concerns or complaints about how we collect, use and store your personal information, contact the <a href="https://www.tbs-sct.canada.ca/ap/atip-aiprp/coord-eng.asp">privacy coordinator of the government institution</a> that holds the information.</p> 
  <p>If you are not satisfied, contact the Office of the Privacy Commissioner, by telephone at 1 800 282-1376 or visit the <a href="https://www.priv.gc.ca/en/">Office of the Privacy Commissioner website</a>.</p> 
 </section> 
 <section> 
  <h3 id="official-languages">Official languages</h3> 
  <p>Many social media platforms have multiple language options and provide instructions on how to set your preferences. The Government of Canada respects the <a href="http://laws-lois.justice.gc.ca/eng/acts/O-3.01/index.html">Official Languages Act</a> and is committed to ensuring that our information is available in both French and English and that both versions are of equal quality.</p> 
 </section> 
</section></div>


            <section class="pagedetails">
    <h2 class="wb-inv">Page details</h2>
    <div class="row">
        
        
            <div class="wb-share col-sm-4 col-md-3 col-sm-push-8 col-md-push-9" data-wb-share="{&quot;lnkClass&quot;: &quot;btn btn-default btn-block&quot;}"></div>
            
        
        <div class="col-sm-6 col-md-5 col-lg-4 col-sm-pull-4 col-md-pull-3">
            <dl id="wb-dtmd">
    <dt>Date modified:</dt>
    <dd><time property="dateModified">2022-07-28</time></dd>
</dl>
        </div>
        
    </div>
</section>

        </main>
    



    




    
        
        
        <div class="newpar new section">

</div>

    
        
        
        <div class="par iparys_inherited">

    
    
    
    

</div>

    




    




    
        
        
        <div class="newpar new section">

</div>

    
        
        
        <div class="par iparys_inherited">

    
    
    
    
        
        
        <div class="global-footer">
    <footer id="wb-info">
	    <h2 class="wb-inv">About this site</h2>
    		
        <div class="gc-main-footer">
			<div class="container">
	<nav>
	<h3>Government of Canada</h3>
	<ul class="list-unstyled colcount-sm-2 colcount-md-3">
		<li><a href="/en/contact.html">All contacts</a></li>
		<li><a href="/en/government/dept.html">Departments and agencies</a></li>
		<li><a href="/en/government/system.html">About government</a></li>
	</ul>
	<h4><span class="wb-inv">Themes and topics</span></h4>
	<ul class="list-unstyled colcount-sm-2 colcount-md-3">			
		<li><a href="/en/services/jobs.html">Jobs</a></li>
		<li><a href="/en/services/immigration-citizenship.html">Immigration and citizenship</a></li>
		<li><a href="https://travel.gc.ca/">Travel and tourism</a></li>
		<li><a href="/en/services/business.html">Business</a></li>
		<li><a href="/en/services/benefits.html">Benefits</a></li>
		<li><a href="/en/services/health.html">Health</a></li>
		<li><a href="/en/services/taxes.html">Taxes</a></li>
		<li><a href="/en/services/environment.html">Environment and natural resources</a></li>
		<li><a href="/en/services/defence.html">National security and defence</a></li>
		<li><a href="/en/services/culture.html">Culture, history and sport</a></li>
		<li><a href="/en/services/policing.html">Policing, justice and emergencies</a></li>
		<li><a href="/en/services/transport.html">Transport and infrastructure</a></li>
		<li><a href="https://international.gc.ca/world-monde/index.aspx?lang=eng">Canada and the world</a></li>
		<li><a href="/en/services/finance.html">Money and finance</a></li>
		<li><a href="/en/services/science.html">Science and innovation</a></li>
		<li><a href="/en/services/indigenous-peoples.html">Indigenous peoples</a></li>
		<li><a href="/en/services/veterans-military.html">Veterans and military</a></li>
		<li><a href="/en/services/youth.html">Youth</a></li>
	</ul>
	</nav>
</div>
	
        </div>
        <div class="gc-sub-footer">
            <div class="container d-flex align-items-center">
            <nav>
                <h3 class="wb-inv">Government of Canada Corporate</h3>
                <ul>
                
                    		<li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
		<li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
		<li><a href="https://www.canada.ca/en/government/about.html">About Canada.ca</a></li>
                
                <li><a href="/en/transparency/terms.html">Terms and conditions</a></li>
                <li><a href="/en/transparency/privacy.html">Privacy</a></li>
                </ul>
            </nav>
                <div class="wtrmrk align-self-end">
                    <img src="/etc/designs/canada/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
                </div>
            </div>
        </div>
    </footer>

</div>

    

</div>

    




    







    <script type="text/javascript">_satellite.pageBottom();</script>






<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="/etc/designs/canada/wet-boew/js/ep-pp.min.js"></script>
<script src="/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script><span id="wb-rsz">&nbsp;</span><script>
// allowlist/blocklist 

/*
 * Domain allowlist and domain specific settings
*/

//make sure to update thisDomain with nulls!!!
_satellite.gcCustom = {
    domain_blocklist: [
      '/analytique-analytics/',
      'checkingvisa.com'
    ],
    protocol_blocklist: ['javascript:', 'mailto:', 'tel:', 'blob:', 'data:'],

    /*Follow this syntax for adding items to the whitelist
    Double check and confirm you are adding to the STAGE or LIVE whitelist
    Double check spelling and syntax for errors
    */
    thisDomain: { AppName: null, LoginStatus: null },
    domain_allowlist: {
        //this allows Analytics tracking
        stage: {
            //EXAMPLE:
            //--- all items MUST inlcude a comma in order to append another line item
            //--- last item does not use comma
           // Canada.ca
            'travel.gc.ca': { AppName: 'canada', LoginStatus: '2' }, // testing
            'www.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'www1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada-preview.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, 
            'canada-stage-aem-s3-preview.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, 
            'canada-aem-s3-stage.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, // New Canadian soil staging environment
            'dev1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'dev3.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'authorca1.dev.canada.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, 
            'author-canada-prod.adobecqms.net': { AppName: 'canada', LoginStatus: '2' }, 
          //BookingTool
            'apps.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'iv.apps.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'gcbooking.adobecqms.net': { AppName: 'canada', LoginStatus: '2' },
           // Search
            'search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'search.gc.ca': { AppName: null, LoginStatus: null },
            'www.search.gc.ca': { AppName: null, LoginStatus: null },
            'recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche.gc.ca': { AppName: null, LoginStatus: null },
            'wpaz-ofm12c-ssl-i.services.gc.qat': { AppName: null, LoginStatus: null },
            'staging-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'wpaz-ofm-i.sade-edap.prv': { AppName: null, LoginStatus: null },
            'wpaz-ofm-i-e-esdc.services.gc.qat': { AppName: null, LoginStatus: null },
            'travel.gc.ca': { AppName: null, LoginStatus: null },// testing
          




        },
        live: {
            //EXAMPLE:
            //'...' : {AppName : null, LoginStatus : null}
           // Canada.ca
            'www.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'www1.canada.ca': { AppName: 'canada', LoginStatus: '2' },
            'apps.canada.ca': { AppName: null, LoginStatus: null },
            'iv.apps.canada.ca': { AppName: null, LoginStatus: null },
            'v.apps.canada.ca': { AppName: null, LoginStatus: null },
           // Search
            'search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.search-recherche.gc.ca': { AppName: null, LoginStatus: null },
            'recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche-search.gc.ca': { AppName: null, LoginStatus: null },
            'search.gc.ca': { AppName: null, LoginStatus: null },
            'www.search.gc.ca': { AppName: null, LoginStatus: null },
            'recherche.gc.ca': { AppName: null, LoginStatus: null },
            'www.recherche.gc.ca': { AppName: null, LoginStatus: null }

        },

  },
 internal_filters : [
 //this is used for outbound link tracking
    //CANADA.CA (AEM)
		'iv.apps.canada.ca',// Booking Tool Prod
		'v.apps.canada.ca',// Booking Tool Prod
		'gcbooking.adobecqms.net',//Booking Tool
		'localhost',
		'universallabs.org',
		'dev1.canada.ca',
		'dev3.canada.ca',
		'www1.canada.ca',
		'canada.ca',
		'www.canada.ca',
		'canada-aem-s3-stage.adobecqms.net', // AEM 6.5
		'canada-stage-aem-s3-preview.adobecqms.net',
        'authorca1.dev.canada.adobecqms.net',
        'staging-recherche.gc.ca', // Search
		'recherche.gc.ca',
		'recherche-search.gc.ca',
		'search.gc.ca',
		'search-recherche.gc.ca',
		'www.recherche.gc.ca',
		'www.recherche-search.gc.ca',
		'www.search.gc.ca',
		'www.search-recherche.gc.ca',
		'canada-service-corps.canada.ca', // PM Service Corps
		'service-jeunesse.canada.ca',
	//Page Analytics Tool 
		'performance.alpha.canada.ca',
	// Library and Archives	
		'bac-lac.gc.ca',
		'lac-bac.gc.ca',
		'www.bac-lac.gc.ca',
		'www.lac-bac.gc.ca',
		'canadiana-qa.dev.bac-lac.gc.ca',
		'central.bac-lac.gc.ca',
		'central-d.dev.bac-lac.gc.ca',
		'webdev-srv.dev.bac-lac.gc.ca',
		'webqa-srv01.qa.bac-lac.gc.ca',
		'ucc-qa',
		'v41extweb01-d.services.bac-lac.gc.ca',
		'canadiana.bac-lac.gc.ca',
		'www.canadiana.bac-lac.gc.ca',
		'cipbookentry.bac-lac.gc.ca',
		'cipbookentry-qa.dev.bac-lac.gc.ca',
		'www.cipbookentry.bac-lac.gc.ca',
		'co-lab.bac-lac.gc.ca',
		'www.co-lab.bac-lac.gc.ca',
		'sigles-symbols-qa.bac-lac.gc.ca',
		'sigles-symbols.bac-lac.gc.ca',
		'www.sigles-symbols.bac-lac.gc.ca',
		'event-qa',
		'event.bac-lac.gc.ca',
		'www.event.bac-lac.gc.ca',
		'nouvelle-france.org', 
		'www.collectionscanada.gc.ca',
		'cipbookentry-d.dev.bac-lac.gc.ca',
		'v41extcapps01-d.dev.bac-lac.gc.ca',
		'tdg-grt-d.dev.bac-lac.gc.ca',
		'event-d.dev.bac-lac.gc.ca',
		'canadiana-d.dev.bac-lac.gc.ca',
		'sigles-symbols-d.bac-lac.gc.ca',
		'dev-www.bac-lac.gc.ca',
		'financement-funding.bac-lac.gc.ca',
		'tdg-grt.bac-lac.gc.ca',
		'event.bac-lac.gc.ca',
		'sigles-symbols.bac-lac.gc.ca',
		'data2.collectionscanada.gc.ca', //testing
		'cipbookentry.bac-lac.gc.ca',
		'www.marc21.ca',	
	// Impact Assessment Agency of Canada	
		'acee.gc.ca', // Old domain (CEAA)
		'acee-ceaa.gc.ca',
		'www.acee.gc.ca',
		'www.acee-ceaa.gc.ca',
		'ceaa.dev.ec.gc.ca',
		'ceaa.gc.ca',
		'ceaa-acee.gc.ca',
		'www.ceaa.gc.ca',
		'www.ceaa-acee.gc.ca',
		'ceaa.qa.ncr.ec.gc.ca',
		'www.iaac-acei.gc.ca', // New domain (IAAC)
		'iaac-acei.gc.ca',
		'www.acei-iaac.gc.ca',
		'acei-iaac.gc.ca',
		'www.iaac.gc.ca',
		'iaac.gc.ca',
		'www.acei.gc.ca',
		'acei.gc.ca',
		'www.iaac-aeic.gc.ca',
		'iaac-aeic.gc.ca',
		'www.aeic-iaac.gc.ca',
		'aeic-iaac.gc.ca',
		'www.aeic.gc.ca',
		'aeic.gc.ca',
		'elearning.iaac-aeic.gc.ca',
		'apprentissage-en-ligne.aeic-iaac.gc.ca',
	// Agriculture and Agri-Food Canada
		'www.agr.gc.ca',
		'agr.gc.ca',
		'www-dev.agr.gc.ca',
		'intranet.agr.gc.ca',
		'www-tst.agr.gc.ca',
		'canadabrandgocaccess.agr.gc.ca',
		'www.canadabrand.agr.gc.ca',
		'canadabrand.agr.gc.ca',
		'brandcanada.agr.gc.ca',
		'www.brandcanada.agr.gc.ca',
		'marquecanadabrand.agr.gc.ca',
		'www.marquecanadabrand.agr.gc.ca',
		'sistest.agr.gc.ca',
		'sis.agr.gc.ca',
		'cms-dev.agr.gc.ca',
		'agr-wcag.agr.gc.ca',
		'agriculture.agr.gc.ca',
		'agriculture.canada.ca',
		'www.agriculture.canada.ca',
	// Treasury Board Secretariat
		'atip-aiprp.tbs-sct.gc.ca', 
		'uat.atip-aiprp.tbs-sct.gc.ca', 
		'pre-prod.atip-aiprp.tbs-sct.gc.ca', 
		'authoring.publiservice.tbs-sct.gc.ca', 
		'authoring.www.tbs-sct.gc.ca',
		'staging.open.canada.ca',
		'search-staging.open.canada.ca',
		'open.canada.ca',
		'search.open.canada.ca',
		'ouvert.canada.ca',
		'rechercher.ouvert.canada.ca',
		'staging.atip-aiprp.tbs-sct.gc.ca',
		'uat1.atip-aiprp.tbs-sct.gc.ca',
		'uat.tbs-sct.gc.ca',
		'www.tbs-sct.gc.ca',
		'dev.tbs-sct.gc.ca',
	// Statistics Canada
		'www.statcan.gc.ca',
		'www5.statcan.gc.ca',
		'www12.statcan.gc.ca',
		'ww23.statcan.gc.ca',
		'ww35.statcan.gc.ca',
		'www65.statcan.gc.ca',
		'www66.statcan.gc.ca',
		'www76.statcan.gc.ca',
		'www120.statcan.gc.ca',
		'www144.statcan.gc.ca',
		'www150.statcan.gc.ca',
		'information-energie.canada.ca',
		'information-energie.statcan.gc.ca',
		'energy-information.canada.ca',
		'census.gc.ca',
		'recensement.gc.ca',
		'geosuite.statcan.gc.ca',
		'geoprod.statcan.gc.ca',
		'wpaz-ofm12c-ssl-i.services.gc.qat',
		'www5testb.statcan.gc.ca',
		'srv113-i.lab.hrdc-drhc.gc.ca',
		'src-dev13.wcms.statcan.ca',
		'codweb1.stcpaz.statcan.gc.ca',
		'codweb2.stcpaz.statcan.gc.ca',
		'stc-ndm-qa-pc2.statcan.gc.ca',
		'prod-p-es-fusion01.stcpaz.statcan.gc.ca',
		'census-qa.statcan.gc.ca',
		'recensement-qa.statcan.gc.ca',
		'qa-p-es-ui01.stcpaz.statcan.gc.ca',
		'dv-vd-sprint1.test.cloud.statcan.ca',
		'www.dv-vd-sprint1.test.cloud.statcan.ca',
		'wwwqa.statcan.gc.ca',
		'www76qa.statcan.gc.ca',
		'geodepot.statcan.gc.ca',
		'geodepot.statcan.ca',
		'portal.covid.cloud.statcan.ca',
		'analytics-platform.statcan.gc.ca',     
		'oc-dev.covid.cloud.statcan.ca',   
		'web2-test1.wcms.statcan.ca',
		'daaas-dev.covid.cloud.statcan.ca',
		 'oc-dev.covid.cloud.statcan.ca',
	// Employment Social Development Canada	
		'disclosure.esdc.gc.ca', 
		'disclosure.servicecanada.gc.ca', 
		'www.canadabenefits.gc.ca', 
		'wpaz-ofm12c-ssl-i.services.gc.qat', 
		'wpaz-ofm-i.sade-edap.prv', 
		'wpaz-ofm-i-e-esdc.services.gc.qat', 
		'prestationsducanada.gc.ca', 
		'www.prestationsducanada.gc.ca', 
		'negotech.labour.gc.ca',
		'negotheque.travail.gc.ca',
		'mlapesd3963v-s2tst-negotech.intra.dev',
		'cv19benefits-appservice-staging.azurewebsites.net',
		'cv19benefits-appservice-dev.azurewebsites.net',
		'covid-benefits.alpha.canada.ca',
		'covid-prestations.alpha.canada.ca',
		'woodpecker.eastus.cloudapp.azure.com',
		'multi-benefits.servicecanada.gc.ca', //CERB DFO
		'multi-benefices.servicecanada.gc.ca', //CERB DFO
		'pesdc.prv',
		'esin-sandbox.powerappsportals.com',
		'srv2140-i2.services.gc.qat',
		'srv2140-s.services.gc.qat',
		'sin-nas.canada.ca',
		'alphasite.dts-stn.com',
		'vc-frontend-static-juane.netlify.app',
		'alpha.service.canada.ca',
		'virtualassistant-main.bdm-dev.dts-stn.com',
		'dts-stn.github.io',
		'dpl-bmd.alpha.service.canada.ca',
		'int16-ssl.services.gc.qat',
		'eservice-uat.powerappsportals.com',
		'iidus-stdei-dev.powerappsportals.com',
		'srv241-s2.lab.hrdc-drhc.gc.ca',
		'srv136.services.gc.ca',
		'www.uat.youth-digital-gateway.dev',
		'www.youth-digital-gateway.dev',
		'www.youth.service.canada.ca',
		'test.cms-sgc.esdc-edsc.canada.ca',
		'uat12-ssl.services.gc.qat',
	// Elections	
		'ec9wbstepfpkedu', 
		'elections.ca', 
		'www.elections.ca', 
		'enr.elections.ca', 
		'www.test.elections.ca', 
		'enr.test.elections.ca',
		'ereg.elections.ca', 
		'www.ereg.elections.ca', 
		'ispdevwww.elections.ca', 
		'secure.elections.ca', 
		'secure.test.elections.ca', 
		'rspispweb01-ste-demo1.elections.ca',
		'ereg.test.elections.ca',
		'ereg.elections.ca',
		'www.ereg.elections.ca',
		'ecdev_maint-pesc.ecade.elections.ca',
		'www.ecdev_maint-pesc.ecade.elections.ca',
		'cef-cce.ca',
		'www.cef-cce.ca',
		'ispdevwww.elections.ca',
		'ec9wbedtpfpked',
		'ecdevmaint-pesc.ecade.elections.ca',
		'ec9wbeddpfpisp.elections.ca',
		'visdev.elections.ca',
		'enr-dev.elections.ca',
		'csep-pesc.elections.ca',
	// Natural Resources Canada	
		'equalby30.org', 
		'www.equalby30.org', 
		'nrcan.gc.ca', 
		'www.nrcan.gc.ca', 
		'rncan.gc.ca', 
		'www.rncan.gc.ca', 
		'rncanengagenrcan.ca', 
		'www.rncanengagenrcan.ca', 
		'test.nrcan.gc.ca', 
		'test.rncan.gc.ca', 
		'www.test.nrcan.gc.ca', 
		'www.test.rncan.gc.ca', 
		'minescanada.ca',
		'www.minescanada.ca',
		'globe-cem-mi.yourballistic.com',
		'esrfunds.org',
		'www.esrfunds.org',
		'www.fondsee.org',
		'fondsee.org',
		'www.npa.gc.ca',
		'npa.gc.ca',
		'www.apn.gc.ca',
		'www.mpmo.gc.ca',
		'www.bggp.gc.ca',
		'www.apap.gc.ca',
		'www.paap.gc.ca',
		'cem-mi-vancouver2019.ca',
		'www.cem-mi-vancouver2019.ca',
		'cmep-mi-vancouver2019.ca',
		'apap.gc.ca',
		'paap.gc.ca',
		'mpmo.gc.ca',
		'bggp.gc.ca',
		'apn.gc.ca',
		'natural-resources.canada.ca', //new canada.ca subdomainsdomain
		'ressources-naturelles.canada.ca', //new canada.ca subdomain
		'nrcan.canada.ca', //new canada.ca subdomain
		'rncan.canada.ca', //new canada.ca subdomain
		'nrcan-rncan.canada.ca', //new canada.ca subdomain
		'rncan-nrcan.canada.ca', //new canada.ca subdomain
		'osdp-cumulative-effects-stage.canada.ca',
		'psdo-effets-cumulatifs-stage.canada.ca',
		'qa.dev.osdp.aws.nrcan-rncan.cloud',
		'osdp-cumulative-effects.canada.ca',
		'psdo-effets-cumulatifs.canada.ca',
		'www.dev.nrcan.gc.ca',
		'dev.nrcan.gc.ca',
		'www.dev.rncan.gc.ca',
		'dev.rncan.gc.ca', 
		'dev.npa.gc.ca',
		'dev.esrfunds.org',
		'dev.mpmo.gc.ca',
		'dev.apn.gc.ca',
		'dev.fondsee.org',
		'dev.bggp.gc.ca',
		'osdp-psdo.canada.ca',
		'stg-osdp-psdo.canada.ca',
		'uat-osdp-psdo.canada.ca',
		'qa.pst.osdp.aws.nrcan-rncan.cloud',
	// Office of the procurement ombudsman	
		'opo-boa.gc.ca', 
		'dev.boa-opo.gc.ca', 
		'xterra3w2k16.ncr.pwgsc.gc.ca',
		'secure.opo-boa.gc.ca',
		'xterra3w2k16.dev.ad.itsso-ospti.gc.ca',
	// MSCA-MEIIO	
		'srv113-i.lab.hrdc-drhc.gc.ca', 
		'srv113-u.lab.hrdc-drhc.gc.ca', 
		'srv136.services.gc.ca', 
		'srv2140-u.services.gc.qat', 
		'srv241-s2.lab.hrdc-drhc.gc.ca', 
	// Transport Canada	
		'transport-dev', 
	// Health Canada	
		'a8047055', 
		'cfgtest.canadacentral.cloudapp.azure.com', //food guide
		'vmportaltest.canadacentral.cloudapp.azure.com',
		'prcitestfr.canadacentral.cloudapp.azure.com',
		'food-guide.canada.ca',
		'www.food-guide.canada.ca',
		'www.guide-alimentaire.canada.ca',
		'guide-alimentaire.canada.ca',
		'clinical-information.canada.ca',
		'renseignements-cliniques.canada.ca',
		'cfg-qa.hres.ca',
		'cfg-stage.hres.ca',
		'food-guide-stage.hpfb-dgpsa.ca',
		'guide-alimentaire-stage.hpfb-dgpsa.ca',
		'prci-dev.jack.hc-sc.gc.ca',
	// Immigration Refugee Canada	
		'www.cic.gc.ca',
		'cic.gc.ca',
		'eservices1.ci.gc.ca',
		'gol-ecas-dev.ci.gc.ca',
		'www-dev.ic.gc.ca',
		'eservices.cic.gc.ca',
		'services3.cic.gc.ca',
		'eservices5.ci.gc.ca',
		'web.passport-online-staging.apps.cic.gc.ca',
		'web.passeport-enligne-staging.apps.cic.gc.ca',
		'web.passport-online-development.apps.cic.gc.ca',
		'web.passeport-enligne-developmente.apps.cic.gc.ca',
		'njes1s6362.apps.ci.gc.ca',
		'atip-aiprp.apps.gc.ca',
		'ircc.canada.ca',
		'apps.ci.gc.ca',
	// Canada Revenue Agency	
		'cra-arc.gc.ca',
		'arc-cra.gc.ca',
		'cra.gc.ca',
		'arc.gc.ca',
		'www.cra-arc.gc.ca',
		'www.arc-cra.gc.ca',
		'www.cra.gc.ca',
		'www.arc.gc.ca',
		'apps.cra-arc.gc.ca',
		//CRA UT
		'cp-ut.isvcs.net',
		'rp-ut.isvcs.net',
		'cp-ut2.isvcs.net',
		'rp-ut2.isvcs.net',
		//CRA SI
		'ams-sga-si.cra-arc.gc.ca',
		'cms-sgj-si.cra-arc.gc.ca',
		'ams-sga-si2.cra-arc.gc.ca',
		'cms-sgj-si2.cra-arc.gc.ca',
		//CRA UA
		'ams-sga-ua.cra-arc.gc.ca',
		'cms-sgj-ua.cra-arc.gc.ca',
		'ams-sga-ua2.cra-arc.gc.ca',
		'cms-sgj-ua2.cra-arc.gc.ca',
		//CRA OT
		'apps1.ams-sga-ot.cra-arc.gc.ca',
		'apps2.ams-sga-ot.cra-arc.gc.ca',
		'apps3.ams-sga-ot.cra-arc.gc.ca',
		'apps4.ams-sga-ot.cra-arc.gc.ca',
		'apps5.ams-sga-ot.cra-arc.gc.ca',
		'apps6.ams-sga-ot.cra-arc.gc.ca',
		'apps7.ams-sga-ot.cra-arc.gc.ca',
		'apps8.ams-sga-ot.cra-arc.gc.ca',
		'cms-sgj-ot.cra-arc.gc.ca',
		'apps1.ams-sga-ot2.cra-arc.gc.ca',
		'apps2.ams-sga-ot2.cra-arc.gc.ca',
		'apps3.ams-sga-ot2.cra-arc.gc.ca',
		'apps4.ams-sga-ot2.cra-arc.gc.ca',
		'pps5.ams-sga-ot2.cra-arc.gc.ca',
		'apps6.ams-sga-ot2.cra-arc.gc.ca',
		'apps7.ams-sga-ot2.cra-arc.gc.ca',
		'apps8.ams-sga-ot2.cra-arc.gc.ca',
		'cms-sgj-ot2.cra-arc.gc.ca',
		'ams-sga.cra-arc.gc.ca',
		'cms-sgj.cra-arc.gc.ca',
		'apps1.ams-sga.cra-arc.gc.ca',
		'apps2.ams-sga.cra-arc.gc.ca',
		'apps3.ams-sga.cra-arc.gc.ca',
		'apps4.ams-sga.cra-arc.gc.ca',
		'apps5.ams-sga.cra-arc.gc.ca',
		'apps6.ams-sga.cra-arc.gc.ca',
		'apps7.ams-sga.cra-arc.gc.ca',
		'apps8.ams-sga.cra-arc.gc.ca',
		'www.ams-sga.cra-arc.gc.ca',
		'www.cms-sgj.cra-arc.gc.ca',
		'www.apps1.ams-sga.cra-arc.gc.ca',
		'www.apps2.ams-sga.cra-arc.gc.ca',
		'www.apps3.ams-sga.cra-arc.gc.ca',
		'www.apps4.ams-sga.cra-arc.gc.ca',
		'www.apps5.ams-sga.cra-arc.gc.ca',
		'www.apps6.ams-sga.cra-arc.gc.ca',
		'www.apps7.ams-sga.cra-arc.gc.ca',
		'www.apps8.ams-sga.cra-arc.gc.ca',
		'apps-ut.isvcs.net',
		'xterra3w2k16.dev.ad.itsso-ospti.gc.ca',
		//CRA Non Secure Portal UT
		'apps-ut.cra-arc.gc.ca',
		'apps-ut2.cra-arc.gc.ca',
		'apps-ut2.isvcs.net',
		//CRA Non Secure Portal UA
		'apps-ua.cra-arc.gc.ca',
		'apps-ua.isvcs.net',
		'apps-ua2.cra-arc.gc.ca',
		'apps-ua2.isvcs.net',
		//CRA Non Secure Portal SI
		'apps-si.isvcs.net',
		'apps-si2.isvcs.net',
		//CRA Non Secure Portal OT
		'apps-ot.cra-arc.gc.ca',
		'apps-ot2.cra-arc.gc.ca',
	// Public Services procurement Canada	
		'test.publications.gc.ca',
		'publications.gc.ca',
		'www.publications.gc.ca',
		'content.buyandsell.gc.ca',
		'beta.buyandsell.gc.ca',
		'beta.achatsetventes.gc.ca',
		'test.buyandsell.gc.ca',
		'test.achatsetventes.gc.ca',
		'webdev02.tpsgc-pwgsc.gc.ca',
		'www.tpsgc-pwgsc.gc.ca',
		'buyandsell.gc.ca',
		'achatsetventes.gc.ca',
		'staging.achatscanadabuys.ca',
		'm8-test.achatscanadabuys.ca',
		'm8-dev-collab.achatscanadabuys.ca',
		'webdev01.tpsgc-pwgsc.gc.ca',
		'webdev08.tpsgc-pwgsc.gc.ca',
		'm8-uat.achatscanadabuys.ca',
		'masource-mysource.shp.dev.global.gc.ca',
		'intranet.tpsgc-pwgsc.gc.ca',
		'masource-mysource.spac-pspc.gc.ca',
		'gcintranet.tpsgc-pwgsc.gc.ca',	
	// Global Affiars Canada	
		'www.international.gc.ca',
		'international.gc.ca',
		'www.tradecommissioner.gc.ca',
		'www.deleguescommerciaux.gc.ca',
		'travel-ace-m2',
		'voyage-ace-m2', 
		'travel.gc.ca',
		'voyage.gc.ca', 
		'core-ombuds.canada.ca',
		'deleguescommerciaux.gc.ca',
		'www.educanada.ca',
		'www.intra',
		'intra',
		'www.intra.signet.international.ca',
		'intra.signet.international.ca',
    // Justice
		'www-uat.justice.gc.ca',
		'limsdev.justice.gc.ca',
		'dmteam-uat.justice.gc.ca',
		'equipesm-uat.justice.gc.ca',
		'www-uat.victimsfirst.gc.ca',
		'www-uat.victimesdabord.gc.ca',
		'jusnet-uat.justice.gc.ca',
		'www-uat.victimsweek.gc.ca',
		'www-uat.semainedesvictimes.gc.ca',
		'www.justice.gc.ca',
		'justice.gc.ca',
		'dmteam.justice.gc.ca',
		'equipesm.justice.gc.ca',
		'www.laws-lois.justice.gc.ca',
		'laws-lois.justice.gc.ca',
		'lois-laws.justice.gc.ca',
		'www.lois-laws.justice.gc.ca',
		'www.ppsc.gc.ca',
		'ppsc.gc.ca',
		'www.victimsweek.gc.ca',
		'www.semainedesvictimes.gc.ca',
		'victimsweek.gc.ca',
		'semainedesvictimes.gc.ca',
		'jusnet.justice.gc.ca',
		'www.victimsfirst.gc.ca',
		'www.victimesdabord.gc.ca',
		'victimsfirst.gc.ca',
		'victimesdabord.gc.ca',
	// Canadian Food Inspection Agency	
		'inspection.gc.ca',
		'www.inspection.gc.ca',
		'inspection.canada.ca',
		'www.inspection.canada.ca',
		'active.inspection.gc.ca',
		'www.active.inspection.gc.ca',
		'merlin.cfia-acia.inspection.gc.ca',
		'apps.merlin.cfia-acia.inspection.gc.ca',
		'www.apps.merlin.cfia-acia.inspection.gc.ca',
	// Public Safety Canada	
		'infomediadev',
		'infomedia.gc.ca',
		'www.infomedia.gc.ca',
		'beta.infomedia.gc.ca',
		'api.infomedia.gc.ca',
		'icdev',
		'psdev',
		'gpdev',
		'ecdev',
		'publicsafety.gc.ca',
		'www.publicsafety.gc.ca',
		'securitepublique.gc.ca',
		'www.securitepublique.gc.ca',
		'getprepared.gc.ca',
		'www.getprepared.gc.ca',
		'preparez-vous.gc.ca',
		'www.preparez-vous.gc.ca',
		'erc-cee.gc.ca',
		'www.erc-cee.gc.ca',
		'infocentral',
		'infocentrale',
	// RCMP External Review Committee	
		'ercdev',
	// Open Government	
		'staging.open.canada.ca',
		'stadification.ouvert.canada.ca',
		'open.canada.ca',
		'ouvert.canada.ca',
		'search.open.canada.ca',
		'rechercher.ouvert.canada.ca',
	// Correctional Investigator Canada	
		'www.oci-bec.gc.ca',
		'oci-bec.gc.ca',
	//Public Service Commission	
		'intracom',
		'intradev',
		'intracom.psc-cfp.gc.ca',
		'extranet.psc-cfp.gc.ca',
		'devextranet.psc-cfp.gc.ca',
		'test-psjobs-emploisfp.psc-cfp.gc.ca',
		'emploisfp-psjobs.cfp-psc.gc.ca',
	//Superintendent of Financial Institutions Canada (Office of the)	
		'devirppub.devosfi.ca',
		'uatirppub.devosfi.ca',
		'uatirppub.osfi-bsif.gc.ca',
		'uatirppub.devosfi.ca',
		'www.osfi-bsif.gc.ca',
	//Women and Gender Equality Canada	
		'canada',
		'intranettest',
		'intranet',
		'femmes-egalite-genres.canada.ca',
		'women-gender-equality.canada.ca',
		'intranet.fegc-wage.gc.ca',
	//Canadian Space Agency	
		'devcorpo',
		'asc-csa.gc.ca',
		'www.asc-csa.gc.ca',
		'csa-asc.gc.ca',
		'www.csa-asc.gc.ca',
		'appsqa.asc-csa.gc.ca',
		'www4.asc-csa.gc.ca',
		'datatest.asc-csa.gc.ca',
		'donnees-data.asc-csa.gc.ca',
	//Infrastructure Canada	
		'internet-dev.ad.infrastructure.gc.ca',
		'infranet-dev.ad.infrastructure.gc.ca',
		'www.infrastructure.gc.ca',
		'infranet.ad.infrastructure.gc.ca',
	//Social Security Tribunal of Canada	
		'sst-stage.stage.atssc-scdata.gc.ca',
		'www.sst-tss.gc.ca',

 ]
};




/* ===== Set data elements that rely on whitelist ===== */

/*jsAbort START*/
var dirs;
var list;
var h = document.location.hostname.toLowerCase(); //host
var j = document.location.pathname.toLowerCase(); //path

if (_satellite.buildInfo.environment == "production") {
    list = _satellite.gcCustom.domain_allowlist.live;
}
else {
    list = _satellite.gcCustom.domain_allowlist.stage;
    //list = _satellite.gcCustom.domain_allowlist.live; //FOR TESTING ON LIVE ONLY! REMOVE

}

//directories to exclude
///Input list. Each item must be inputed with its own quotation marks and be separted using a comma
/// excl list cannot be empty
excl=_satellite.gcCustom.domain_blocklist

var j = document.location.host + document.location.pathname.toLowerCase(); //path
var toExcl = false; //set to false by default
for (var i in excl) {
    if (j.indexOf(excl[i]) > -1) {
        toExcl = true;
    }
}
//end directory exclusions

//sets the data element
if ((typeof list[h] === 'undefined') || (toExcl === true)) {
    _satellite.setVar('jsAbort', 'true'); //set to true
    //_satellite.cookie.set('blockList', 'yes'); //set blockList cookie so previous values are not set on next page
    window.blockList = 'yes';
    _satellite.cookie.set('prev_page_blockList', 'yes')
}
else {
    _satellite.gcCustom.thisDomain = list[h];
    _satellite.setVar('jsAbort', 'false');
    window.blockList = 'no';
}

/*jsAbort END*/

</script><script>
//
// Check if the current Browser are WebAuth capable (FIDO Alliance).
//

var webAuthCapable = "webAuth not returned in time";
 
PublicKeyCredential && PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable && PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()
  .then( ( available ) => {
    if ( available ) {
      webAuthCapable = "webAuth enabled"; // The visitor's device is capable for WebAuth
    } else {
      webAuthCapable = "webAuth not enabled"; // The visitor's device is not capable for WebAuth or that feature is somehow deactivated.
    }
    _satellite.logger.info( webAuthCapable );
  }).catch((err) => {
    webAuthCapable = "API error"
    _satellite.logger.info( webAuthCapable )
});
</script><script>
/*
* Find most common Personal Identifiable Information (PII) in a string and return either the cleaned string either true/false
* @param {string} str
* @param {boolean} toClean
* @return {string | true | false}
* @example
* findPotentialPII( "email:test@test.com, phone:123 123 1234", true, true )
* returns "email:[REDACTED/CAVIARDÉ], phone:[REDACTED/CAVIARDÉ]",
* findPotentialPII( "email:test@test.com, phone:123 123 1234", false, false )
* returns true
* findPotentialPII( "email:test@test.com, phone:123 123 1234", true, false )
* returns 'email:, phone:'
*/
findPotentialPII = function( str, toClean, bMarker ) {

	if ( typeof str  !== "string" ) {
		return false;
	}
        var regEx = [
			[ /\d(?:[\s\-\\.\\/]?\d){8,}(?!\d)/ig, "[REDACTED/CAVIARDÉ]" ], //9digits or more pattern
			[ /\b[A-Za-z]{2}[\s\\.-]*?\d{6}\b/ig, "[REDACTED/CAVIARDÉ]" ], //canadian nr passport pattern
			[ /\b(?:[a-zA-Z0-9_\-\\.]+)(?:@|%40|%2540)(?:[a-zA-Z0-9_\-\\.]+)\.(?:[a-zA-Z]{2,5})\b/ig, "[REDACTED/CAVIARDÉ]" ], // updated email pattern
			[ /\b[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d\b/ig, "[REDACTED/CAVIARDÉ]" ], //postal code pattern
			[ /(?:(username|user)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ], // username patterns
			[ /(?:(password|pass)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ], // password patterns
            [ /(?:(pw|login|id|name)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ] // other username/password variations
		],
		isFound = false;

	for ( var arr in regEx ) {
		if ( str.match( regEx[ arr ][ 0 ] ) ) {
			isFound = true;
			if ( toClean ) {
				str = str.replaceAll( regEx[ arr ] [ 0 ], ( bMarker === true ? regEx[ arr ][ 1 ] : "" ) );
			}
		}
	}

	return toClean && isFound ? str : isFound;
};

// scrub only email/user/pass 
// slash repaced with hyphen due to folder count in url
urlPotentialPII = function( str, toClean, bMarker ) {

	if ( typeof str  !== "string" ) {
		return false;
	}
        var regEx = [
			[ /\b(?:[a-zA-Z0-9_\-\\.]+)(?:@|%40|%2540)(?:[a-zA-Z0-9_\-\\.]+)\.(?:[a-zA-Z]{2,5})\b/ig, "[REDACTED-CAVIARDÉ]" ], // updated email patterns
           	[ /(?:(username|user)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ], // username patterns
			[ /(?:(password|pass)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ], // password patterns
            [ /(?:(pw|login|id|name)[%20]?([:=]|(%EF%BC%9A))[^\s&]*)/ig, "[REDACTED/CAVIARDÉ]" ], // other username /password variations
            [ /\b(?:[A-Za-z0-9%._+-]+(@|%40|%2540)|\w*gmail\W*com)\b/ig, "[REDACTED/CAVIARDÉ]" ] // gmailcom or gmail.com instances
		],
		isFound = false;

	for ( var arr in regEx ) {
		if ( str.match( regEx[ arr ][ 0 ] ) ) {
			isFound = true;
			if ( toClean ) {
				str = str.replaceAll( regEx[ arr ] [ 0 ], ( bMarker === true ? regEx[ arr ][ 1 ] : "" ) );
			}
		}
	}

	return toClean && isFound ? str : isFound;
};
</script><script>
document.addEventListener(adobe.target.event.REQUEST_SUCCEEDED, function (e) {
    window.ttMETA= typeof(window.ttMETA)!="undefined" ? window.ttMETA : [];

    var tokens=e.detail.responseTokens;

    if (isEmpty(tokens)) {
      return;
    }

    var uniqueTokens = distinct(tokens);

    uniqueTokens.forEach(function(token) {
      window.ttMETA.push({
        'ActivityName': token["activity.name"],
        'ActivityId' : token["activity.id"],
        'ExperienceName': token["experience.name"],
        'ExperienceId': token["experience.id"],
        'OfferId': token["offer.id"],
        'OfferName': token["offer.name"],
        'GeoCity': token["geo.city"],
        'GeoState': token["geo.state"],
        'MboxName': e.detail.mbox});
    });
  });

  function isEmpty(val){
    return (val === undefined || val == null || val.length <= 0) ? true : false;
  }

  function key(obj) {
     return Object.keys(obj)
    .map(function(k) { return k + "" + obj[k]; })
    .join("");
  }

  function distinct(arr) {
    var result = arr.reduce(function(acc, e) {
      acc[key(e)] = e;
      return acc;
    }, {});

    return Object.keys(result)
    .map(function(k) { return result[k]; });
  }
</script>
<script src="/etc/designs/canada/wet-boew/js/theme.min.js"></script>





<script>
//***************************************************
/*****


-----------------------
Invitation Manager v1.0-----------------------

Dependencies on _satellite object
	*	_satellite.gcCustom (adds new functions to this object)
	*	_satellite.browserInfo.browser
	*	_satellite.getVar("PageTheme-PageLanguage")
	*	_satellite.getVar("PageCreator")
	*	_satellite.getVar("ErrorPageType")-


Dependencies on s_c_il[1] object
	*	s_c_il[1].eVar4

*****/
//***************************************************


_satellite.gcCustom.storage = {
    set : function(n, v, e) {
        var o = {val: v, t: new Date().getTime() + e*86400}
        var t = (e === 0) ? sessionStorage : localStorage;
        t.setItem(n, JSON.stringify(o));
    },
    get : function (n) {
        var b = sessionStorage.getItem(n);
        if (b != null)
            return JSON.parse(b).val;
        else
            b = localStorage.getItem(n);
        if (b != null) {
            var c = JSON.parse(b);
            if (c.t > new Date().getTime())
                return c.val;
        }
        return null;
    },
    remove : function (n) {
        sessionStorage.removeItem(n);
        localStorage.removeItem(n);
    }
}

window.addEventListener( "load", imSetup);

function imSetup() {
"use strict";

//document each variables purpose

var debugMode, //if true, log console info
    surveyDB, //JSON var of data stored in im.xml 
    surveyScope, //string of what survey page, institution, theme...
    overrideScope = false,  //query parameter sets this to a text value to force the scope hat
    overrideStart = false,  //query parameter sets this to true to ignore the start date of surveys
    overrideID, //query parameter sets this to an id value for a specific survey
    dtmSettings = { 
        
        //page types that im.xml is not allowed ( = false) to run on
        enablePages : {
            404 : false, 
            500 : false, 
            403 : false, 
            splash : false
        },
        
        //name of local or session storage values
        storageNames : {
            persistent : "im-invited",
            session : "im-settings"
        },
        
        //location of im.xml
        dbURL : "/content/dam/canada/json/im.xml"
    };
try {
    //	Test if local storage is available/enabled before starting
    var mod = "test";
    localStorage.setItem(mod, mod);
    localStorage.removeItem(mod);
    main();
} catch (e) {
    return false;
}


function main() {
    
    //Enable console logging if debug mode is turned on
    debugMode = checkEnableDebugMode();
    
    clog("Start");
    
    //Make sure IM is allowed to run on this page type
    if (checkPageTypeAllowed() === false)
        return;
    
    //check if any special parameters are used for testing reasons
    checkTestParams();

    //if user has not seen a survey
     if (localStorage.getItem('lastDateIMShown') === null) {
        
        //check if DB is already in session storage
        surveyDB = _satellite.gcCustom.storage.get(dtmSettings.storageNames.session)
        
        //download the DB if it's not already stored
        if (surveyDB == null){
            downloadSurveyDB();
            //asynchronous call, do not execute code here
        }
        else{
            main2();
        }
    }
    else {
        clog("User has seen an invitation already");
          
        
        //	Invitation was not within the last 15 days...
        surveyDB = _satellite.gcCustom.storage.get(dtmSettings.storageNames.session);
        var lastDateIMShown;
        if (localStorage.getItem('lastDateIMShown') !== null) {
            lastDateIMShown = new Date(localStorage.getItem('lastDateIMShown'));
        }

        if (isStorageExpired(lastDateIMShown)) {
            _satellite.gcCustom.storage.remove('lastDateIMShown');
            main2();
        }
        
     // clog( "persistent IM duration: " + _satellite.gcCustom.storage.get(dtmSettings.storageNames.session.settings.persistent_cookie_duration));
    }
    
    //asynchronous call may have been made, do not execute code here
}

function main2() {
    //	Makes sure that the surveyDB object is set, it could not have been defined if localStorage was not defined and the XML is unfound on the server
    /*	To test v.settings is undefined
    if (!surveyDB) {
        return;
    }*/
    
    //at this point, we don't know if the DB was just downloaded or if it was retrieved from session storage.
    //If the DB doesn't have a scopeHat then we know we need to decide on which scope hat to give
    if (typeof surveyDB.settings.scopeHat === "undefined"){
        firstTimeSetup();
    }

    //Check if we need to override the scope hat
    //This is needed since firstTimeSetup won't run if this is not the first page of the visit
    if (overrideScope){
        surveyDB.settings.scopeHat = overrideScope;
    }

    surveyScope = surveyDB.settings.scopeHat;
    
    clog("Scope hat = " + surveyScope + ", " + surveyDB.surveys.length + " potential surveys, removing surveys outside of date range");
    
    // Delete all surveys that are outside of working dates
    var list = surveyDB.surveys;
    for (var i = 0; i < list.length; i++) {
        var n = new Date().getTime();
        if (n < new Date(list[i].start_date_time).getTime() || n >= new Date(list[i].end_date_time).getTime()) {
            
            //if overriding start date and still before end date then don't delete this survey
            if (overrideStart && n < new Date(list[i].end_date_time).getTime())
                continue;
            
            //Splice removes the element from the array
            list.splice(i,1);
            //decrement i since the next record has moved to replace the current record
            i--;
        }
    }
    
    clog(surveyDB.surveys.length + " potential surveys, removing surveys based on targeting");
    
    // Delete all surveys that don't match browser and/or device type
    var list = surveyDB.surveys;
    
    for (var i = 0; i < list.length; i++) {
        
        var b = true;
        
        //avoid_browsers is an array of browser names to avoid the names of the browsers match those reported by _satellite.browserInfo.browser
        var sublist = getObjArr(list[i].avoid_browsers);
        for (var j = 0; j < sublist.length; j++)
            if (_satellite.browserInfo.browser == sublist[j].Value)
                b = false;
        
        //target_device is either non-existant, "Desktop" or "Mobile" which matches the values in eVar 4
        if (typeof list[i].target_device !== "undefined" && typeof list[i].target_device === "string" && !(s_c_il[1].eVar4.toLowerCase() == list[i].target_device.toLowerCase()) )
            b = false;
        
        //target_language is checked against navigator.language
        if (typeof list[i].target_language !== "undefined" && typeof list[i].target_language === "string" && !(new RegExp(list[i].target_language, 'i').test(navigator.language)) )
            b = false;
        
        
        //if anything caused b to be false, delete the survey from the DB
        if (b === false) {
            list.splice(i,1);
            //decrement i since the next record has moved to replace the current record
            i--;
        }
    }
    
    clog(surveyDB.surveys.length + " potential surveys");
    
    //save the DB to session storage
    _satellite.gcCustom.storage.set(dtmSettings.storageNames.session, surveyDB, 0);
    
    clog("Checking whitelist");
    
    // Check if url on whitelist
    var list = getObjArr(surveyDB.settings.tbl_url_whitelist), a = document.location, h = a.hostname + a.pathname, didMatch = false;
    if (typeof list === "undefined")
        return false;

    for (var i = 0; i < list.length; i++) {
        var b = new RegExp(list[i].url, "i");
        if (b.test(h))
            didMatch = true;
    }
    if (didMatch === false)
        return false;
    
    clog("Checking blacklist");
    
    //Check if url on blacklist
    var list = getObjArr(surveyDB.settings.tbl_url_blacklist), a = document.location, h = a.hostname + a.pathname;
    for (var i = 0; i < list.length; i++) {
        if (list[i].url.toLowerCase() == h.toLowerCase())
            return false;
    }
    
    clog("Removing surveys based on page attributes");
    
    //make a deep copy of the survey DB before we remove the applicable surveys 
    //this is needed because getPageAttributeMatches will delete any surveys that match from the surveyDB list
    var cpySurveys = JSON.parse(JSON.stringify(surveyDB.surveys));
    
    //b will be the index of a survey in cpySurveys that was chosen otherwise it will be undefined if no survey was selected
    var b = getWeightedRandom(getPageAttributeMatches());

    /*console.dir(cpySurveys)
        console.dir(surveyDB)*/
        
    if (typeof b !== "undefined") {

        for (var j = 0; j < cpySurveys.length; j++) {
            if(cpySurveys[j].id === b){
            var selectedSurveyIndex = j;
            break;

            }
        }
        
        clog("Select survey " + cpySurveys[selectedSurveyIndex].survey_name);
        
        //assume that the visitor will ignore the survey. This way no more invitations for X days
        //	_satellite.gcCustom.storage.set( dtmSettings.storageNames.persistent, "ignored", surveyDB.settings.persistent_cookie_duration );


      //Show survey only if user hasn't seen it last 15 days
        var lastDateIMShown;
        var now = new Date();
        
        if (localStorage.getItem('lastDateIMShown') !== null) {
            lastDateIMShown = new Date(localStorage.getItem('lastDateIMShown'));
        }

    //	Persistent cookie duration is the number of days of minimal interval between 2 surveys
        if (!isStorageExpired(lastDateIMShown)) {
               //popup the survey
            invite(cpySurveys[selectedSurveyIndex]);
            //set the date visitor was invited
            localStorage.setItem('lastDateIMShown', now);
        }

          //end 15 days conditions


        //	popup the survey
        //	invite(cpySurveys[b]);
    }
    else {
        clog("No survey selected, " + surveyDB.surveys.length + " surveys remain in session storage");
        //save the updated DB to session storage
        //the DB must be saved here since we need to remove surveys that were applicable on this page so we don't test for them again in the visit
        _satellite.gcCustom.storage.set(dtmSettings.storageNames.session, surveyDB, 0);
    }

}

function getPageAttributeMatches() {

    //Return list of valid surveys based on page / institution / theme / site and check if override survey id needed
    //Remove surveys that are valid from the surveyDB array so that when we save it, those ones are removed and not tested on future pages in the visit
    
var surveySubList = {};
    var url = (document.location.hostname + document.location.pathname).toLowerCase();
    var count = 0;
    
    for (var i = 0; i < surveyDB.surveys.length; i++) {
        if (overrideID) {
                //skip this loop's logic if it's not the desired survey, therefore there's no chance it will be selected
            if (surveyDB.surveys[i].id !== overrideID){
            
                continue;
            }  

            //if it is the desired survey, set it's probability to 100%. Note that the desired survey must still be applicable on this page so the logic in the swtich statement still must execute meet the conditions
            surveyDB.surveys[i].probability = 1;
        }

        
        switch(surveyDB.surveys[i].type) {
            case "Entire site":
            
                //get an object array of the sites to run the survey on
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_sites);
                
                for (var c = 0; c < sublist.length; c++) {
                    
                    //convert the value for the site into RegExp non-case sensitive
                    var b = new RegExp(sublist[c].site, "i");
                    
                    //if the url matches the regEx
                    if (b.test(url)) {
                        
                        //store this survey's id and probability in the new object (this object is later fed to getWeightedRandom)
                        //convert site survey probability into rate since it is between 0 and Visitor Allocation for site wide type
                    
                        surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability / surveyDB.settings.Site;
                        //keep track of the number of surveys that apply so we can console log it later
                        count++;

                        //clog(surveyDB.surveys[i].survey_name + " " + surveyDB.surveys[i].probability + " out of " + surveyDB.settings.Site)
                        
                        //remove this survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Theme":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_themes);
                for (var c = 0; c < sublist.length; c++) {
                    if (_satellite.getVar("PageTheme-PageLanguage").toLowerCase() == sublist[c].theme.toLowerCase()) {
                //		
          surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Institution":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_institutions);
                for (var c = 0; c < sublist.length; c++) {
                    if (_satellite.getVar("PageCreator").toLowerCase().indexOf(sublist[c].institution.toLowerCase()) === 0) {
                    
          surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
                
            case "Page":
                var sublist = getObjArr(surveyDB.surveys[i].tbl_survey_urls);
                for (var c = 0; c < sublist.length; c++) {
                    if (window.location.href.toLowerCase().indexOf(sublist[c].url.toLowerCase()) !== -1) {
                    
         surveySubList[surveyDB.surveys[i].id] = surveyDB.surveys[i].probability;
                        count++;
                        
                        //remove the eligible survey from the DB, since we won't test for it on future pages
                        surveyDB.surveys.splice(i,1);
                        //decrement i since the next record has moved to replace the current record
                        i--;
                    }
                }
                
                break;
        }
                
        
    }
    clog(count + " potential surveys, selecting a survey");

    return surveySubList;
}


function firstTimeSetup() {
    //Objectives
    //Allocate a scope hat
    //Remove surveys that don't match the scope hat
    
    //tmpSurveyDB is where we will copy all of the wanted data from surveyDB into (this removes non applicable scope surveys)
    var tmpSurveyDB = {settings : {}, surveys : []}
    
    clog("Rolling probability for scope hat");
    
    if (overrideScope)
        surveyScope = overrideScope;
    else
        surveyScope = getWeightedRandom({"Page":surveyDB.settings.Page, "Institution":surveyDB.settings.Institution, "Theme":surveyDB.settings.Theme, "Entire site":surveyDB.settings.Site});

    
    //get an object array of all surveys in the DB
    var list = getObjArr(surveyDB.qry_active_surveys);

    clog(list.length + " potential surveys, removing surveys that don't match scope hat");

    for (var i = 0; i < list.length; i++) {
        
        //Get only surveys that apply to this scope
        if (list[i].type == surveyScope) {
            
            //copy good surveys tmpSurveyDB
            tmpSurveyDB.surveys[tmpSurveyDB.surveys.length] = list[i];
        }
    }
    
    //put all the needed settings into tmpSurveyDB
    tmpSurveyDB.settings.Site = surveyDB.settings.Site;
    tmpSurveyDB.settings.scopeHat = surveyScope;
    tmpSurveyDB.settings.tbl_url_whitelist = surveyDB.settings.tbl_url_whitelist;
    tmpSurveyDB.settings.tbl_url_blacklist = surveyDB.settings.tbl_url_blacklist;
    tmpSurveyDB.settings.persistent_cookie_duration = surveyDB.settings.persistent_cookie_duration;
    
    //set surveyDB to tmpSurveyDB so we can be sure that surveyDB is the good variable
    surveyDB = tmpSurveyDB;
}

function getWeightedRandom(spec) {
    //Objectives
        //Given a JSON array of values and probabilities, output the weighted random selection. For example {coffee : 0.20, tea : 0.80}
        //Output nothing if no selection is made (I.E. undefined)
    var i, sum=0, r=Math.random();
    for (i in spec) {
        
        //be sure to never select something with 0% probability !, since Math.random() can be 0!
        if (spec[i] == 0)
            continue;
        sum += Number(spec[i]);
        if (r <= sum)
            return i;
    }
}

function saveDbAsJSON(dbData) {
    //Objectives
        //Convert dbData into JSON
        //Set surveyDB to the dataroot node and log the version number
    var x, c;
    //clog("saveDbAsJSON()");
    try{x = $.parseXML(dbData); c = xmlToJson(x)}
    catch(e){clog("Converting XML to JSON encountered an error: " + e.message);return false}

    surveyDB = c.dataroot;
    clog("im.xml version: " + x.documentElement.getAttribute("generated"));
    main2();
}

function downloadSurveyDB() {
    clog("Downloading survey database")
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4) {
            clog("Download status = " + xmlHttp.statusText);
            
            if (xmlHttp.status == 200) {
                var b = xmlHttp.responseText;
                if (b && b != "" && typeof(b) != "undefined")
                    saveDbAsJSON(b.replace(/\r?\n|\r/g, "").replace(/\\u[\dA-F]{4}/gi, function (match) {return String.fromCharCode(parseInt(match.replace(/\\u/g, ''), 16))}));
            }
        }
    }
    xmlHttp.open("GET", dtmSettings.dbURL, true); // true for asynchronous 
    xmlHttp.send(null);
}
//Take a date object as parameter
function isStorageExpired(storageDate) {
    var now = new Date();
    //storageDate = new Date(storageDate);
//	Persistent cookie duration is the number of days of minimal interval between 2 surveys
    if (((now - storageDate) <= (surveyDB.settings.persistent_cookie_duration * 86400000)) || !storageDate || typeof storageDate === "undefined") {
        return false;
    }
    return true;
}

function checkTestParams() {
    //Objectives
        //action any special query parameters
    if  (/[?&]im_nocookiecheck=1/i.test(document.location.search)) {
        //delete these cookies
        clog("Treat visitor as new visitor (deleting locally stored data)");
        _satellite.gcCustom.storage.remove( dtmSettings.storageNames.persistent );
        _satellite.gcCustom.storage.remove( dtmSettings.storageNames.session );
          localStorage.removeItem('lastDateIMShown');
    }
    
    if ( (/[?&]im_scope=page/i.test(document.location.search)))
        overrideScope = "Page";
    else if ( (/[?&]im_scope=institution/i.test(document.location.search)))
        overrideScope = "Institution";
    else if ( (/[?&]im_scope=theme/i.test(document.location.search)))
        overrideScope = "Theme";
    else if ( (/[?&]im_scope=site/i.test(document.location.search)))
        overrideScope = "Entire site";
    
    if ( (/[?&]im_nodatecheck=1/i.test(document.location.search)))
        overrideStart = true;
    
    var b = /[?&]im_surveyid=([^?&]+)/.exec(document.location.search);
    if (b !== null )
        overrideID = b[1];
}

function checkPageTypeAllowed() {
    //Objectives
        //return true if the page type is allowed and false otherwise
    var b;
    // 1.	Check if splash page
    if ( $( "body" ).hasClass( "splash" ) ) 
        b = "splash";

    // 2.	Check if 404 page
    //if (_satellite.dataElements["ErrorPageType"].default != _satellite.getVar("ErrorPageType"))
    if (_satellite.getVar("ErrorPageType") != 'blank error page type')
        b = _satellite.getVar("ErrorPageType");
    
    if (b != null)
        return dtmSettings.enablePages[b];
    
    return true;
}

function checkEnableDebugMode() {
    //Objectives
        //Set the local storage token to remember to log console info
    if (/[?&]logim=(true|1)/i.test(document.location.search))
        localStorage.setItem('dtm-logim', 1);

    if (/[?&]logim=(false|0)/i.test(document.location.search))
        localStorage.removeItem('dtm-logim');
    
    return (localStorage.getItem('dtm-logim') == 1);
}

/**
* Originally from http://davidwalsh.name/convert-xml-json
* This is a version that provides a JSON object without the attributes and places textNodes as values
* rather than an object with the textNode in it.
* 27/11/2012
* Ben Chidgey
*/
function xmlToJson(xml) {
    //Objectives
        //Convert XML into JSON
    
    // Create the return object
    var obj = {};

    // text node
    if (4 === xml.nodeType) {
        obj = xml.nodeValue;
    }

    if (xml.hasChildNodes()) {
        for (var i = 0; i < xml.childNodes.length; i++) {
            var TEXT_NODE_TYPE_NAME = '#text',
                item = xml.childNodes.item(i),
                nodeName = item.nodeName,
                content;

            if (TEXT_NODE_TYPE_NAME === nodeName) {
                //single textNode or next sibling has a different name
                if ((null === xml.nextSibling) || (xml.localName !== xml.nextSibling.localName)) {
                    content = xml.textContent;

                //we have a sibling with the same name
                } else if (xml.localName === xml.nextSibling.localName) {
                    //if it is the first node of its parents childNodes, send it back as an array
                    content = (xml.parentElement.childNodes[0] === xml) ? [xml.textContent] : xml.textContent;
                }
                return content;
            } else {
                if ('undefined' === typeof(obj[nodeName])) {
                    obj[nodeName] = xmlToJson(item);
                } else {
                    if ('undefined' === typeof(obj[nodeName].length)) {
                        var old = obj[nodeName];
                        obj[nodeName] = [];
                        obj[nodeName].push(old);
                    }

                    obj[nodeName].push(xmlToJson(item));
                }
            }
        }
    }
    return obj;
}

function invite(survey) {
    //Objectives
        //Display the popup given the survey parameters

var html =  "<aside id='gc-im-popup' class='survey hidden-print' tabindex='0'>" +
      "<style scoped>" +
        // Default (extra extra small view and over)
        ".survey {z-index: 1000; position: relative; margin: 0 auto; margin: 0 15px;}" +
        "#survey-close {height: 42px; line-height: 42px;}" +
        
        // Media queries (for modern browsers and IE8 - via respond.js)
        "@media screen and (min-width: 480px) {" + // Extra small view and over
          ".survey {position: fixed; bottom: 4.9em; left: 0; right: 0; margin: 0 auto; padding: 15px;}" +
          ".survey .panel {box-shadow: 0 0 15px;}" +
          ".survey .panel:focus {outline: 1px dotted #fff;}" +
          "#survey-close {top: 15px; right: 15px;}" +
        "}" +
        "@media screen and (min-width: 480px) and (max-width: 767px) {" + // Small view only
          ".survey {margin: 0 15px;}" +
          "#survey-close {right: 30px;}" +
        "}" +
        "@media screen and (min-width: 768px) {" + // Medium view and over
          ".survey {width: 720px;}" +
        "}" +
        "@media screen and (min-width: 992px) {" +
          ".survey {width: 470px; left: 470px; bottom: 4.2em;}" + // Large view and over
        "}" +
        "@media screen and (min-width: 1200px) {" + // Extra large view and over
         ".survey {width: 570px; left: 570px;}" +
        "}" +
        
        // View class fallbacks (needed for IE9-11 - they seem to ignore JS-injected media queries unless the user manually resizes their browser window)
        "html:not(.xxsmallview) .survey {position: fixed; bottom: 4.9em; left: 0; right: 0; margin: 0 auto; padding: 15px;}" +
        "html:not(.xxsmallview) .survey .panel {box-shadow: 0 0 15px;}" +
        "html:not(.xxsmallview) .survey .panel:focus {outline: 1px dotted #fff;}" +
        "html:not(.xxsmallview) #survey-close {top: 15px; right: 15px;}" +
        "html.xsmallview .survey {margin: 0 15px;}" +
        "html.smallview .survey {width: 720px;}" +
        "html.smallview #survey-close {right: 30px;}" +
        "html.mediumview .survey {width: 470px; left: 470px; bottom: 4.2em;}" +
        "html.largeview .survey, html.xlargeview .survey {width: 570px; left: 570px; bottom: 4.2em;}" +
      "</style>" +
      "<div class='panel panel-primary mrgn-bttm-0'>" +
        "<header id='close-im' class='panel-heading'>" +
          "<h2 class='panel-title'>" + survey["title-" + wb.lang] + "</h2>" + 
        "</header>" +
        "<div class='panel-body'>" +
        survey["body-" + wb.lang] +
          /*"<p>" + survey.paragraph1 + "</p>" +
          "<p class='mrgn-bttm-0'>" + survey.paragraph2 + "</p>" +*/
          "<ul class='list-inline mrgn-bttm-0'>" +
            "<li class='mrgn-tp-md'><a id='survey-yes' class='btn btn-primary' href='" + survey["link-" + wb.lang] + "' target='_blank'>" + survey["yes-" + wb.lang] + "</a></li>" +
            "<li class='mrgn-tp-md'><button id='survey-no' class='btn btn-default survey-close'>" + survey["no-" + wb.lang] + "</button></li>" +
          "</ul>" +
        "</div>" +
        "<button id='survey-close' class='mfp-close' title=" + '"' + survey["close-" + wb.lang] + '"' + ">×<span class='wb-inv'> " + survey["close-" + wb.lang] + "</span></button>" +
       "<input type='hidden' name='popupName' value='" + survey["uniqueTitle"] + "'>" +
  "</div>" +
    "</aside>",
$html = $( html ),
$userFocus = false,
overlayIsClosing,
cookieValue,
focusFlag;

// Close the overlay if any of its links/buttons get clicked or if the escape key gets pressed.
$html.on( "click vclick mouseup keydown", function( e ) {

  // Proceed if any of the overlay's links or buttons get clicked (including middle mouse clicks) or if the escape key gets pressed within the overlay.
  if (
      ( ( e.type === "click" || e.type === "vclick" ) && e.which === 1 && $( e.target ).closest( "a, button", this ).length ) // Clicked/Tapped a link/button.
      ||
      ( e.type === "mouseup" && e.which === 2 && $( e.target ).closest( "a", this ).length ) // Middle-clicked a link.
      ||
      ( ( e.type === "keydown" ) && ( e.which === 27 ) ) // Pressed escape key.
    ) {
    
      // add to remove added attributes to overlay when closing
      $("#first-focus").remove();
    
      // Set a flag to indicate the overlay is closing.
      // Needed to prevent IE11 (possibly also IE8-10/Edge) from failing to return user focus when closing the overlay (due to a separate focusin event triggering too quickly and clearing the user focus variable before it's needed).
      overlayIsClosing = 1;
      
      // Hide the overlay immediately.
      $( this ).hide();
      
      // Remove the overlay shortly afterwards.
      // This is being done to prevent problems when the yes link is middle-clicked. If the overlay were to be immediately removed, middle-clicking the yes link would remove the overlay without opening the link in a new tab/window. To avoid that issue, the overlay is now getting immediately hidden, then removed a short time later.
      setTimeout( function() { $html.empty() }, 1000 );
      
      // Determine the cookie's new value, depending on the ID of which link/button was clicked. Don't set the cookie's value to yes/no if the Esc key was pressed.
      if ( $( e.target ).closest( "#survey-yes", this ).length && ! ( ( e.type === "keydown" ) && ( e.which === 27 ) ) ) {
        cookieValue = "yes";
      }
      else if ( $( e.target ).closest( "#survey-no", this ).length && ! ( ( e.type === "keydown" ) && ( e.which === 27 ) ) ) {
        cookieValue = "no";
      }
      else {
        cookieValue = "closed";
      }
      
      // Return the user's focus to where they were before the overlay stole it, then delete the user focus variable.
      // Otherwise, return the user's focus to the H1 element (or if it doesn't exist - the next element, which is likely to be main). Needed to prevent browsers from unexpectedly returning focus to the top of the page.
      /*if ( $userFocus ) {
        $userFocus.trigger( "setfocus.wb" );
        $userFocus = null;
      }
      else {*/
      
        // Does the H1 exist? If yes, focus to it.
        // Otherwise, focus to whatever element comes after the overlay (likely main).
        /*if ( $( "h1" ).length ) {
          $( "h1" ).trigger( "setfocus.wb" );
        }
        else {
          $html.next().trigger( "setfocus.wb" );
        }
      }*/
    
      // focus on the beginning of the document
    $("#wb-tphp").trigger("setfocus.wb");
      
      // Set cookie.
     // _satellite.gcCustom.storage.set( dtmSettings.storageNames.persistent, cookieValue, surveyDB.settings.persistent_cookie_duration );
     // localStorage.setItem('lastDateIMShown', now);
      // Remove this event handler.
      $( this ).off();
  

  }
  
 
		
} );

// If the user tabs out of the overlay after it was automatically focused on, return their initial focus.
/*$html.find( ".panel" ).on( "keydown", function( e ) {
  
  // Proceed if tabbing backwards from the panel container/yes link or if tabbing forward from the close button.
  if ( ( ( ( $( e.target ).hasClass( "panel" ) || e.target.id === "survey-yes" ) && e.shiftKey) || e.target.id === "survey-close" ) && e.which === 9 && $userFocus ) {
      
      // Don't focus to whatever comes directly before or after the overlay in the flow of content.
      e.preventDefault();
      
      // Return the user's focus to where they were before the overlay stole it, then delete the user focus variable.
      $userFocus.trigger( "setfocus.wb" );
      $userFocus = null;
      
      // Remove this event handler.
      $( this ).off( "keydown" );
    }
} );
*/
  
// Insert the overlay directly before the <main> element.
$( "main" ).before( $html );
  // Since jQuery fix will sanitize the target attribute, here is a quick solution to add it back right after the IM html is inserted
  $("#survey-yes").attr("target", "_blank");
 // Inset the "Skip to Invitation Manager Popup" link before the <main> element.
		if (wb.lang === "fr")
		{
			$( "#wb-tphp" ).prepend("<li id='first-focus' class='wb-slc'>" +
			"<a  class='wb-sl' href='#gc-im-popup'>Passer au Gestionnaire des Invitations</a></li> ");
		}
		else {
			$( "#wb-tphp" ).prepend("<li id='first-focus' class='wb-slc'>" +
			"<a   class='wb-sl' href='#gc-im-popup'>Skip to Invitation Manager Popup</a></li> ");
		}
  
  

//pop-up impression for analytics
   
    //If the pop-up appears  
    if($('aside.survey.hidden-print').length){
                var popUpName = $("input[name='popupName']").val();
                   
   _satellite.setVar('jsPopupName', popUpName);
 //direct call rule
 _satellite.track('popUpImpression');
          
               }
    
    //End pop-up impression code

// Find where the user is currently focused.
/*$userFocus = $( document.activeElement );*/

// Automatically focus on the overlay.
//$html.find( ".panel" ).trigger( "setfocus.wb" );


// After the overlay steals focus, clear the user focus variable if the user goes outside of of it.
// It's possible to go outside of the overlay without closing or tabbing out of it (e.g. by clicking or touching outside of it or using a screen reader to navigate by links). In that scenario, the user focus variable needs to be cleared to prevent strange focusing if the user enters the overlay again afterwards and focuses out of/closes it.
/*$( "body" ).on( "focusin mousedown", function ( e ) {*/

  // When the survey overlay first gains focus, set the focus flag variable to 1. Sometimes the overlay isn't the first thing that gains focus.
  // After the overlay has initially gained focus, once something outside of it gets focused on, clear the user focus variable. If the overlay is losing focus because it's being closed, don't do anything or else IE11 (possibly also IE8-10/Edge) will run this event handler too early and prevent the close event from returning user's focus to the right spot.
 /* if ( $( e.target ).closest( ".survey", this ).length ) {
    
    if ( ! focusFlag ) {
      focusFlag = 1;
    }
  }
  else {
  
    if ( ! overlayIsClosing && $userFocus ) {
      $userFocus = null;
    }
  }
} );*/
}

function getObjArr(o){
    //Objectives
        //Always return an object array containing the given parameter. This allows us to loop through the object array whether there are 0, 1 or more objects in the array
    return (typeof o === "undefined") ? [] : Array.isArray(o) ? o : [o];
}

function clog(a) {
    //Objectives
        //log console data if debug mode is enabled
    if (debugMode) 
        console.log("Invitation Mgr: " + a);
    }
}



</script><script>
function MediaSetup() {
    var mltmd = jQuery(".wb-mltmd");
    var mltmdSet = new Array(mltmd.length);
      
    for(var i=0; i < mltmd.length; i++)  {
      var e = mltmd.get(i);
      var md = jQuery(e);
      var va = md.find("video,audio");
      if(va.length > 0) {
          
          //Video Title
          var ttl = va.attr("title");
          if(ttl == null || ttl.length < 1){
              ttl = "";
          }
          
          //Video or Audio and Format (video/youtube)
          var type = va.find("source").attr("type");
          var frmt2 = "";
          if(type == null || type.length < 1){
              type = "";
              frmt = "";
          }
          else {
              var frmt = type.split("/", 2);
              if(frmt.length > 1)
                  frmt2 = frmt[0];
          }
          
          //Source URL
          var src = va.find("source").attr("src");
          if(src == null || src.length < 1){
              src = "";
          }
          
          
          mltmdSet[i] = {
          el:e,
          ct:0, 
          tt:0,
          vid_per:0,
          vid_sent_per: new Array(),
          title:ttl,
          vidOrAud:frmt2,
          source:src,
          format:type,
          playSent:false,      
          endedSent:false 
          };
          
          md.on("playing timeupdate ended", jQuery.proxy(function(x){
          var m = jQuery(this.el);
          
          switch(x.type){
              case "playing":
              if(this.playSent == false){
                var duration = m.find(".wb-mm-tmln-ttl span:not(.wb-inv)").text().trim();
                if(!/[0-9]{2}:[0-9]{2}:[0-9]{2}/.test(duration))
                  duration = "00:00:00";
                if(this.tt == 0)
                  this.tt = Math.floor(Date.parse("Thu, 01 Jan 1970, "+duration+" GMT-0400") - Date.parse("Thu, 01 Jan 1970, 00:00:00 GMT-0400"));
                if(this.tt !== 0){
                  _satellite.setVar("jsMediaTitle", this.title);
                  _satellite.setVar("jsMediaType", this.vidOrAud);
                  _satellite.setVar("jsMediaFormat", this.format);
                  _satellite.setVar("jsMediaSource", this.source);
                  _satellite.track("media play");
                  this.playSent=true;  
                }
              }
              break;
              case "timeupdate":
              var currentTime = m.find(".wb-mm-tmln-crrnt span:not(.wb-inv)").text().trim();
              if(!/[0-9]{2}:[0-9]{2}:[0-9]{2}/.test(currentTime))
                    currentTime = "00:00:00";
              var ctime = Math.floor(Date.parse("Thu, 01 Jan 1970, "+currentTime+" GMT-0400") - Date.parse("Thu, 01 Jan 1970, 00:00:00 GMT-0400"));
              
              var timeParts = 10;
              var timeMark = Math.floor(this.tt / timeParts);
  
              if (ctime !== 0) {
                  if(this.ct !== ctime){
                          this.ct = ctime;
                  for (var i = 1; i <= timeParts; i++) {
                      if (this.ct == Math.round(timeMark * i / 1000)*1000) {
                      this.vid_per = (100/timeParts) * i;
                      i=timeParts;
                      }
                  } 
                  
                  switch(this.vid_per){
                      case 20:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 20");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;
                      case 50:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 50");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;
                      case 80:
                      var sent = jQuery.inArray(this.vid_per, this.vid_sent_per);
                      if (sent < 0) {
                          _satellite.setVar("jsMediaTitle", this.title);
                          _satellite.setVar("jsMediaType", this.vidOrAud);
                          _satellite.setVar("jsMediaFormat", this.format);
                          _satellite.setVar("jsMediaSource", this.source);
                          _satellite.track("media mark 80");
                          this.vid_sent_per.push(this.vid_per);
                      }
                      break;  
                  }
                  }
                  }
              break;    
          }
          },mltmdSet[i]));    
      }
    }	
  }
  if(typeof jQuery === "function"){ 
    MediaSetup();
  } else {
    setTimeout(function(){
      if(typeof jQuery === "function"){ 
        MediaSetup();
      } 	  
    }, 500);
  }
</script><script>
_satellite.track('pageReset');
</script></body><iframe id="AE2yihxEUypeVrUF" style="display: none;"></iframe><div style="display: none;"></div></html>